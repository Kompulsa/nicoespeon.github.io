




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF8">
    <meta name="viewport"    content="width=device-width, minimum-scale=1.0">
    <meta name="description" content="">

    <title>Building a multilanguage Jekyll blog |Â @nicoespeon</title>

    <link rel="icon"         href="/assets/img/icon.png">

    <!-- DNS prefetch for external resources -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//platform.twitter.com">
    <link rel="dns-prefetch" href="//p.twitter.com">
    <link rel="dns-prefetch" href="//cdn.api.twitter.com">
    <!-- <link rel="dns-prefetch" href="//google-analytics.com"> -->

    <link rel="stylesheet"   href='http://fonts.googleapis.com/css?family=Snippet|Roboto:300,100,700'>
    <link rel="stylesheet"   href="/assets/css/nicoespeon.css" media="screen">
</head>
<body>
    <div id="main-content">
        <div class="container">
            <div class="gw">
                <div class="g seven-tenths portable-one-whole">
                    <header class="media" role="banner">
                        <!-- Brand logo -->
                        <img src="http://www.gravatar.com/avatar/46978c87c5c75cea5d05a61fa8b7d95b" class="media__img img--circle" />

                        <!-- Main navigation -->
                        <nav class="media__body" role="navigation">
                            <ul class="nav nav--main">
                                
                                    <li>
                                        <a href="/index.html">Home</a>
                                    </li>
                                
                                    <li>
                                        <a href="/about.html">About</a>
                                    </li>
                                
                                    <li>
                                        <a href="/projects.html">Projects</a>
                                    </li>
                                
                                    <li>
                                        <a href="/worth-reading.html">Worth Reading</a>
                                    </li>
                                
                            </ul>
                        </nav><!-- /navigation -->
                    </header><!-- /header -->

                    




<article role="main">
    <h1>
        Building a multilanguage Jekyll blog<br>
        <span class="zeta">
            
                (07 April, 2013)
            
        </span>
    </h1>

    <p class="islet">
        As a first post, what about sharing the way I managed to build this blog? Having a both english and french Jekyll website is not that hard, but you have to care about some crucial points.
    </p>

    <h2 id='why_jekyll'>Why Jekyll?</h2>

<p>I won&#8217;t write a n-th post about the reason of choosing Jekyll as the static site generator for my blog. There are already <a href='https://www.google.fr/search?q=moving+blog+to+jekyll'>plenty of them</a>.</p>

<p>I&#8217;ll just sum it up with the following bullet-points :</p>

<ul>
<li><strong>I don&#8217;t need to deal with a database</strong>. I just want to Keep It Simple (Stupid) and front-end will just do it well.</li>

<li><strong>I want to have my website updated when I push it to Github</strong>. I could have done some hook to deal with that but I don&#8217;t have to, thanks to <a href='https://help.github.com/categories/20/articles'>Github Pages</a>.</li>

<li><strong>I love keeping myself up-to-date with new trends</strong>. And the Jekyll approach just sounds good to me.</li>
</ul>

<p>I could recommend you <a href='http://csswizardry.com/2012/12/a-new-css-wizardry/'>the post from Harry Roberts</a> and <a href='http://hugogiraudel.com/2013/02/21/jekyll'>the one from Hugo Giraudel</a> which comforted me in my choice.</p>

<h2 id='what_about_multilingual'>What about multilingual?</h2>

<p>The thing is, Jekyll is not actually build to support multinlingual blogs. The <a href='http://liquid.rubyforge.org/classes/Liquid/StandardFilters.html#M000012'>Liquid <code>date</code> filter</a> will display the english version of the date.<br />Futhermore, if you want to distinguish posts by their language, then you have to create a category per language. But the Jekyll <code>.paginator</code> is not build to deal with categories, which is kind of a problem.</p>

<p>Nevertheless, I wanted to create my blog both in French and English for few reasons :</p>

<ol>
<li><strong>Most of the nicest websites treating about front-end development are in English</strong>, which is fine but I would like to see few of them written in my native language for other French developers who may not be fluent in English (even if they should be).</li>

<li><strong>I&#8217;m French and proud to be</strong>. Although I love English, there&#8217;s no reason for me not to write some posts in my native language too.</li>

<li><strong>This is a challenge</strong> and I love challenges&#8230; as every developer does, right?</li>
</ol>

<p><em>So here&#8217;s the strategy.</em><br />English is the default language, at the root level.<br />Each language represents a category, which could be done thanks to the folders architecture.<br />The French part should be under the <code>/fr</code> base url, which is fine with the previous statements.<br />English posts should only display into <code>/index.html</code>, French posts should only display into <code>/fr/index.html</code> (and the pagination should be done accordingly).<br />It should Keep It Simple (Stupid).</p>

<p>Let&#8217;s build the architecture for the source files:</p>
<div class='highlight'><pre><code class='text'>.
|-- _includes/      # Partials included in other files
|-- _layouts/       # Templates of the website
|-- _plugins/       # Plugins to override Jekyll workflow
|-- assets/         # LESS/CSS, JS, images, ...
|-- fr/             # French category
|   |-- _posts/     # French posts
|   |-- index.html  # French html files
|   |-- about.html
|   |-- (...)
|
|-- en/             # English category
|   |-- _posts/     # English posts
|
|-- index.html      # Default html files (EN)
|-- about.html
|-- (...)
|-- _config.yml     # Jekyll configuration file
</code></pre></div>
<p>When launched, Jekyll generates the static final website into the <code>_site/</code> folder.</p>
<p class='islet'>
    I use the <code>_config.yml</code> file to put some locale variables I could use in the main templates.<br /><br />
    This is definitely <strong>not the cleanest solution</strong> in my humble opinion, but it's quite easy to deal with and it works fine for the moment. It may change in the future in a smarter way to handle this. 
</p>
<h2 id='plugins_on_the_road'>Plugins on the road</h2>

<p>In order to solve the mentioned problems, I used 2 plugins to override the regular Jekyll workflow.</p>

<h4 id='1_pagination_per_category'>1. Pagination per category</h4>

<p><a href='https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_plugins/category_pagination.rb'>category_pagination.rb</a> has the paginator only considers posts of the current category in order to distinguish the two languages.</p>

<p>I modified the original plugin to have the default category, at root level, set as the <em>English</em> one instead of displaying all of the <code>site.posts</code>.</p>

<h4 id='2_i18n_filter'>2. i18n Filter</h4>

<p><a href='https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_plugins/i18n_filter.rb'>i18n_filter.rb</a> customizes the <code>page.date</code> treatment accordingly to the locale.</p>

<p>I&#8217;ve had to add the <a href='https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/_locales/fr.yml'>_locales/fr.yml</a> file to create the <code>localize</code> function. It performs just as the <code>date</code> does, but it displays the French format for the date.</p>

<h2 id='the_github_thing'>The Github thing</h2>

<p>Plugins are set up, templates are built, design has been completed, the git workflow is ready and so is the remote repository on Github. <em>Let&#8217;s push!</em></p>

<p><a href='https://help.github.com/articles/setting-up-a-custom-domain-with-pages'>The DNS redirection for my custom domain</a> just works fine but&#8230; wait. It doesn&#8217;t play as expected.<br />Damn it! I just notice that Github is running Jekyll in <code>--safe</code> mode, which means that plugins are disabled. And so are my category pagination and my i18n filter.</p>

<p><strong>For every problem, a solution</strong>, with Google being your best friend. <a href='http://charliepark.org/jekyll-with-plugins/'>I found inspiration</a> to redesign my personal workflow in that way.</p>

<p><em>Let&#8217;s have a look to my branching model.</em><br />The <code>master</code> branch correspond to the compiled website (the one generated into <code>_site/</code> directory) so that Github can deliver it directly as a static website, thanks to the <code>.nojekyll</code> file.<br />The <code>develop</code> branch correspond to the source files, as I would like to keep them tracked and open-sourced. They would be compiled with Jekyll in order to proceed to deployment.<br />There&#8217;s no more merge from <code>develop</code> into <code>master</code> as there&#8217;s only deployments from now. I just work on <code>develop</code> and, when I&#8217;m ready, I deploy the whole site with a new commit on <code>master</code>.</p>
<p class='islet'>
    Of course I already pushed the first commits when I realized I was wrong. But instead of recreating the whole repo and rebase my git history, I decided to deal with it with just few commits to correct the situation. There's no shame in doing mistakes after all.
</p>
<p>I just create a <a href='https://github.com/nicoespeon/nicoespeon.github.io/blob/develop/Makefile'>Makefile</a> in order to do all that stuff with a <code>make deploy</code> command. And voilÃ !</p>

<h2 id='and_here_we_go'>And here we go</h2>

<p>Here we are, it just works perfectly and I&#8217;m now ready to go with a both English and French, Jekyll-flavored, Github-hosted blog <em>\o/</em></p>

<p>There is still enhancements I should take care of -such as deploying a Google Analytics and a comments system- but I&#8217;m satisfied with the result. The challenge is taken up and the journey has begun. <strong>Let&#8217;s transform these posts into a monster.</strong></p>
</article>
                </div>
            
                <div class="g three-tenths portable-one-whole">
                    <div id="sidebar" role="complementary">
                        














<!-- Lang navigation -->
<nav role="navigation">
    <ul class="nav nav--stacked text-center">
        
            <li class="current">
                
                <a href="/">
                    English version
                </a>
            </li>
        
            <li >
                
                <a href="/fr/">
                    Version franÃ§aise
                </a>
            </li>
        
    </ul>
</nav>

<!-- About -->
<aside class="text-justify">
    <p>My name is <span class='brand-face'>Nicolas</span> and I'm a french IT business student, doing some freelance web development aside.</p><p>I <a href='/archive'>write</a> articles about web development and project management. I got <a href='http://fr.linkedin.com/pub/nicolas-carlo/3b/b24/95/' target='_blank'>LinkedIn</a> and I <a href='http://twitter.com/nicoespeon' target='_blank'>tweet</a> too.</p>
</aside>

<!-- Tweets -->
<aside class="text-center hide--portable">
    <a class="twitter-timeline" href="https://twitter.com/nicoespeon" data-widget-id="320422386929377280">Tweets de @nicoespeon</a>
</aside>
                    </div>
                </div>
            </div>
        </div><!-- /container -->
    </div><!-- /main-content -->

    <footer role="contentinfo">
        <div class="container">
            <p>
                &copy; 2013 - <a href="https://twitter.com/nicoespeon" target="_blank">Nicolas (Espeon) Carlo</a><br>
                The website is built upon <a href='https://github.com/mojombo/jekyll' target='_blank'>Jekyll</a> and <a href='http://inuitcss.com/' target='_blank'>inuit.css</a> from the excellent <a href='https://twitter.com/csswizardry' target='_blank'>@csswizardry</a>. Source code is <a href='https://github.com/nicoespeon/nicoespeon.github.io' target='_blank'>hosted on GitHub</a>.
            </p>
        </div>
    </footer>

    <!-- Twitter API -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    
    <!-- Google Analytics -->
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-39957541-2']);
      _gaq.push(['_setDomainName', 'nicoespeon.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</body>
</html>