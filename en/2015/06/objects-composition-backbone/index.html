<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, minimum-scale=1.0"><meta name="description" content="Why objects composition is preferable to inheritance in JavaScript? Most of all, how do you apply this technique with Backbone.js?"><meta property="og:site_name" content="@nicoespeon's blog" /><meta property="og:url" content="http://nicoespeon.com/en/2015/06/objects-composition-backbone/" /><meta property="og:type" content="article" /><meta property="og:title" content="Inheritance, composition and Backbone.js | @nicoespeon" /><meta property="og:description" content="Why objects composition is preferable to inheritance in JavaScript? Most of all, how do you apply this technique with Backbone.js?" /><meta property="og:image" content="http://www.gravatar.com/avatar/46978c87c5c75cea5d05a61fa8b7d95b" /><title>Inheritance, composition and Backbone.js | @nicoespeon</title><link rel="icon" href="/assets/img/icon.png"><link rel="author" href="https://plus.google.com/u/0/108378377887967941980"><!-- DNS prefetch for external resources --><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//platform.twitter.com"><link rel="dns-prefetch" href="//p.twitter.com"><link rel="dns-prefetch" href="//cdn.api.twitter.com"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="stylesheet"href='http://fonts.googleapis.com/css?family=Snippet|Roboto:300,100,700'><link rel="stylesheet" href="/assets/css/nicoespeon.css" media="screen"><link rel="stylesheet" href="/assets/css/nicoespeon-print.css" media="print"></head><body><div id="site"><div class="container"><div class="grid"><div class="grid__item seven-tenths portable-one-whole" role="main"><header class="media" role="banner"><!-- Brand logo --><img src="http://www.gravatar.com/avatar/46978c87c5c75cea5d05a61fa8b7d95b" class="media__img img--circle" alt="My avatar" width="80" height="80"/><!-- Main navigation --><nav class="media__body" role="navigation"><ul class="nav nav--main"><li><a href="/index.html">Home</a></li><li><a href="/about.html">About</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/worth-reading.html">Worth Reading</a></li></ul></nav><!-- /navigation --></header><!-- /header --><article role="main"><h1>Inheritance, composition and Backbone.js</h1><div class="media"><a href="https://twitter.com/share" class="twitter-share-button media__img--rev" data-text="Inheritance, composition and Backbone.js |" data-via="nicoespeon">Tweeter</a><div class="media__body brand-face zeta">(19 June, 2015)</div></div><p class="islet">Why objects composition is preferable to inheritance in JavaScript? Most of all, how do you apply this technique with Backbone.js?</p><h2 id="toc_0">&quot;Favor objects composition over inheritance&quot;</h2><p>When you&#39;re doing Object Oriented Programmation (OOP), you create a bunch of objects with their data structure and methods that compose their interface. You decide how to split your objects based on the <em>Single Responsibility Principle</em> (SRP): <strong>each object should have one and only one reason to change</strong>.</p><p>To make interesting stuff happen, you need to combine those objects.</p><p>Roughly, there are 2 types of relationships in an object model: inheritance and composition.</p><p>You can do the analogy with a family tree:</p><ul><li><strong>inheritance</strong> is like a birth: when it happens, this is for life.</li><li><strong>composition</strong> is like a marriage: it happens during the participating objects&#39; lifetimes, and it can change. Objects can discard partners and get new partners to collaborate with. Please note that objects are surely not monogams.</li></ul><blockquote><p>Source: <a href="http://www.amazon.com/Object-Design-Roles-Responsibilities-Collaborations/dp/0201379430">Object Design - Roles, Responsibilities and Collaborations</a></p></blockquote><h3 id="toc_1">&quot;Inheritance&quot; all the things!</h3><p>The very first thing JavaScript developers do is trying to mimic rules of pseudo-classical inheritance.</p><p>They usually quickly come up with a lot of <code>new</code> everywhere and inheritance chains awfully long. That generally produce something <strong>very hard to maintain</strong>.</p><p>That&#39;s true you&#39;ve got everything you need to do inheritance with classes, interfaces, … in Java.</p><p>This is not JavaScript.</p><h3 id="toc_2">Keep It Simple, Seriously</h3><p>The base rule in JavaScript is <strong>prototypal inheritance</strong>.</p><p>Forget about the technical jargon, just remember you have <strong>objects that can link to other objects</strong> (OLOO).</p><p>Thus, it&#39;s way simpler to encapsulate methods from a same logic into an object, then simply <strong>return this object</strong>. If you need to, you can also create a function that will return an object — which is what we call a <em>factory</em>.</p><p>Then you&#39;ll take this object, eventually compose it with others, to build the prototype which you&#39;ll use to instantiate your class. That simple.</p><p>To sum it up: instead of creating huge, poorly built, inheritance chains from constructors, simply create your objects and compose them to create a prototype you will instantiate your class with.</p><h2 id="toc_3">With a concrete example</h2><h3 id="toc_4">Context</h3><p>For quite some time I&#39;ve been working full-time on <a href="https://beta.vinoga.com">Vinoga</a>, a social-farming game about wine, developed in HTML5.</p><p>Among few libraries, we use <em>Backbone.js</em> to decouple our views from our data with ease.</p><p>Let&#39;s take a concrete use case: elements on the map.</p><p>If we take a few time to think about it, there are actually 2 types of elements:</p><ol><li><code>Props</code> that are decorations elements — trees, rocks, paths…</li><li><code>Buildings</code> that are buildings of the game — winery, castle…</li></ol><p>There is, among others, one difference we can notice from now: <code>Buildings</code> can be constructed — from the build menu —, not <code>Props</code> since they already are on the map.</p><p>Whatever, all these elements share a common behavior: they are on the map. Hence, <code>Props</code> and <code>Buildings</code> both inherit from <code>Objects</code>, which describes the behavior of an &quot;object&quot; on the map.</p><p>But there also are different types of <code>Buildings</code>, such as:</p><ul><li><code>Markets</code> that are buildings that will reflect the state of the player&#39;s store</li><li><code>Productions</code> buildings, that will transform resources — grape, juice — into another product — juice, bottle.</li></ul><div class="illustration"><img alt="Inheritance, level 1" title="Inheritance, level 1" src="/assets/img/object-composition-backbone/1-inheritance.png">Our initial inheritance chain</div><h3 id="toc_5">About constructability</h3><p>After we discussed with the Game Designer, we realized that <code>Markets</code> are not constructable: they already are on the map.</p><p>Constructability is a behavior that were part of the <code>Buildings</code> one until now. But yep, let&#39;s handle that with a little modification of the inheritance chain:</p><div class="illustration"><img alt="Inheritance, level 2" title="Inheritance, level 2" src="/assets/img/object-composition-backbone/2-longuer-inheritance-chain.png">Our updated inheritance chain to adapt</div><h3 id="toc_6">Here comes the drama</h3><p>As time goes, specs evolve and features too: brace yourself, <code>Decorations</code> are coming!</p><p><code>Decorations</code> are decorations elements — actually, <code>Props</code> — except that they are constructables too!</p><p>Well, now we&#39;re a bit stucked since <code>ConstructableBuildings</code> inherits from <code>Buildings</code>. We&#39;d like not to duplicate <code>ConstructableBuildings</code> to recode roughly the same thing into <code>Props</code>.</p><p>Looks like we&#39;ll end up with classes that inherit of useless properties at the very best.</p><div class="illustration"><img alt="Inheritance, the problem" title="Inheritance, the problem" src="/assets/img/object-composition-backbone/3-inheritance-issue.png">We were'nt very smart on this one, now we're stuck!</div><h3 id="toc_7">Why so pseudo-classical?</h3><p>Well, how did we get there? How to get out of here?</p><p>Actually, we were a bit in the hurry when the constructability question appears. Without any more reflexion we came with the logic that &quot;<code>Productions</code> IS a <code>ConstructableBuildings</code> that IS a <code>Buildings</code> that IS an <code>Objects</code>&quot;. Kaboom, inheritance!</p><p>In fact, if we look closer, we could infer that constructability is a <strong>behavior</strong>. You can not say that there is no <code>Constructable</code> element without <code>Building</code>. This is a subtle error that is so frequent in JavaScript because of pseudo-classical inheritance since this is the only thing you remember: this is the very first — bad — instinct.</p><p>In our case, the only legitimate inheritance chain may be the one that bounds <code>Decorations</code> to <code>Props</code>. Anyway, I still think that you can get rid of it too.</p><p>What you actually put into <code>Objects</code> is a bunch of behaviors that are shared between <code>Props</code> and <code>Buildings</code>. But technically, <code>Objects</code> doesn&#39;t represent anything concrete: this would be an <em>abstract class</em> if we were coding in Java. Just like <code>Buildings</code> by the way.</p><h3 id="toc_8">Embrace composition</h3><p>In JavaScript, may I suggest another way: let&#39;s describe each behavior into its own object. Let&#39;s get rid of constructors and inheritance chains.</p><p>Then, combine these objects to make the prototype of objects we want to build. No <em>class</em> around, simply objects that <strong>are composed from</strong> other objects. Eventually <em>factories</em> to construct the correct object regarding your needs.</p><div class="illustration"><img alt="Composition, the solution" title="Composition, the solution" src="/assets/img/object-composition-backbone/4-composition-resolution.png">It's way simpler to play Legos!</div><p class="islet">Here we just augment our prototype with other objects that describe behaviors. That's what <strong>mixin</strong> is about.<br><br>If your object inherits from another, then prefer to use <strong>prototypal inheritance</strong>.</p><h2 id="toc_9">What about Backbone?</h2><h3 id="toc_10">Backbone.extend</h3><p>When you use Backbone, you use <code>.extend()</code> to override <code>Backbone.[Model|Collection|View|…]</code>. Then you instantiate it with <code>new</code>.</p><p>Thus, it&#39;s very frequent to follow the pseudo-classical inheritance reflex and to end up with:</p><div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">ObjectsModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="err">…</span> <span class="p">);</span>
<span class="kd">var</span> <span class="nx">BuildingsModel</span> <span class="o">=</span> <span class="nx">ObjectsModel</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="err">…</span> <span class="p">);</span>
<span class="kd">var</span> <span class="nx">MarketsModel</span> <span class="o">=</span> <span class="nx">BuildingsModel</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="err">…</span> <span class="p">);</span>
</code></pre></div><p>Which, by the way, would be the same than:</p><div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">MarketsModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="err">…</span><span class="p">).</span><span class="nx">extend</span><span class="p">(</span><span class="err">…</span><span class="p">).</span><span class="nx">extend</span><span class="p">(</span><span class="err">…</span><span class="p">);</span>

<span class="c1">// Then you instantiate when needed</span>
<span class="kd">var</span> <span class="nx">marketsModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MarketsModel</span><span class="p">();</span>
</code></pre></div><p>Backbone is built like that. <code>.extend()</code> easily lead us to that slippery slope where Models depend on the others in many not-that-subtle ways.</p><h3 id="toc_11">Compose your prototype THEN extend</h3><p>Even though you need to inherit from Backbone, you can at least limit the damages. Even though <code>.extend()</code> exists, you don&#39;t have to use it for every single object you create. The only object we really need to <code>.extend()</code> here is <code>Backbone.Model</code>.</p><p>The main idea is to compose objects to make to prototype you will <strong>then</strong> use into the <code>.extend()</code> of your Model / Collection / View…</p><div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">objectsModelProto</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">buildingsModelProto</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">constructablesModelProto</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">};</span>

<span class="c1">// We compose to make a new prototype.</span>
<span class="kd">var</span> <span class="nx">marketsModelProto</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span>
  <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span> <span class="c1">// -&gt; specific interface for markets</span>
  <span class="nx">objectsModelProto</span><span class="p">,</span>         <span class="c1">//</span>
  <span class="nx">buildingsModelProto</span><span class="p">,</span>       <span class="c1">// =&gt; our mixins</span>
  <span class="nx">constructablesModelProto</span><span class="p">,</span>  <span class="c1">//</span>
  <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span> <span class="c1">// -&gt; to override mixins, if needed</span>
<span class="p">);</span>

<span class="c1">// Once prototype is created, inherit from Backbone.</span>
<span class="kd">var</span> <span class="nx">MarketsModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">marketsModelProto</span> <span class="p">);</span>

<span class="c1">// Then you instantiate.</span>
<span class="kd">var</span> <span class="nx">marketsModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MarketsModel</span><span class="p">();</span>
</code></pre></div><p>You can see how <code>objectsModelProto</code>, <code>buildingsModelProto</code> and <code>constructablesModelProto</code> override the base prototype of <code>marketsModelProto</code> to add specific behaviors.</p><h4 id="toc_12">What if inheritance makes sense?</h4><p>If inheritance makes sense — let&#39;s say that <code>Decorations</code> IS a <code>Props</code> — then you can simply do the same with <strong>prototypal inheritance</strong>.</p><p>You simply need to create an object from the prototype of <code>Props</code>, as a prototype for <code>Decorations</code>:</p><div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">objectsModelProto</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">constructablesModelProto</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">};</span>

<span class="c1">// Props compose himself with the behavior of Objects.</span>
<span class="kd">var</span> <span class="nx">propsModelProto</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span>
  <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span> <span class="c1">// -&gt; specific interface of props</span>
  <span class="nx">objectsModelProto</span>
<span class="p">);</span>

<span class="c1">// Decorations inherits from Props… and we compose the</span>
<span class="c1">// constructability behavior passing by — mixin!</span>
<span class="kd">var</span> <span class="nx">decosModelProto</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span>
  <span class="nx">_</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">propsModelProto</span> <span class="p">),</span>
  <span class="nx">constructablesModelProto</span><span class="p">,</span>
  <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span> <span class="c1">// -&gt; to override our mixins, if needed</span>
<span class="p">);</span>

<span class="c1">// Once prototype are created, inherit from Backbone.</span>
<span class="kd">var</span> <span class="nx">PropsModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">propsModelProto</span> <span class="p">);</span>
<span class="kd">var</span> <span class="nx">DecorationsModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">decosModelProto</span> <span class="p">);</span>

<span class="c1">// Then you instantiate.</span>
<span class="kd">var</span> <span class="nx">propsModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PropsModel</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">decorationsModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DecorationsModel</span><span class="p">();</span>
</code></pre></div><p class="islet">I'm using <code>_.assign</code> and <code>_.create</code> from <a href="https://lodash.com/" target="_blank">lodash</a> here.<br>They fallback on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank"><code>Object.assign()</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank"><code>Object.create()</code></a> when supported.</p><p>Please note that might be useful to use <code>_.merge</code> instead of <code>_.assign</code> if you need to merge attributes deeply. This may be handy with Backbone when you need to merge things like <code>events</code>:</p><div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">objectsViewProto</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">events</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;click .store&quot;</span><span class="o">:</span> <span class="s2">&quot;store&quot;</span><span class="p">,</span>
    <span class="s2">&quot;click .turn&quot;</span><span class="o">:</span> <span class="s2">&quot;turn&quot;</span>
  <span class="p">}</span>

  <span class="nx">store</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">store</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span>
  <span class="nx">turn</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">turn</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span>
<span class="p">};</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="nx">displayModal</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">displayModal</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span>
    <span class="nx">select</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">select</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">objectsViewProto</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="nx">events</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;click&quot;</span><span class="o">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
      <span class="s2">&quot;click .turn&quot;</span><span class="o">:</span> <span class="s2">&quot;displayModal&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
<span class="c1">// -&gt;</span>
<span class="c1">// {</span>
<span class="c1">//   events: {</span>
<span class="c1">//     &quot;click&quot;: &quot;select&quot;,</span>
<span class="c1">//     &quot;click .turn&quot;: &quot;displayModal&quot;</span>
<span class="c1">//   },</span>
<span class="c1">//  </span>
<span class="c1">//   displayModal: function displayModal () { /* … */ },</span>
<span class="c1">//   select: function select () { /* … */ },</span>
<span class="c1">//   store: function store () { /* … */ },</span>
<span class="c1">//   turn: function turn () { /* … */ }</span>
<span class="c1">// }</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="nx">displayModal</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">displayModal</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span>
    <span class="nx">select</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">select</span> <span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">objectsViewProto</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="nx">events</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;click&quot;</span><span class="o">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
      <span class="s2">&quot;click .turn&quot;</span><span class="o">:</span> <span class="s2">&quot;displayModal&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
<span class="c1">// -&gt;</span>
<span class="c1">// {</span>
<span class="c1">//   events: {</span>
<span class="c1">//     &quot;click&quot;: &quot;select&quot;,</span>
<span class="c1">//     &quot;click .store&quot;: &quot;store&quot;,</span>
<span class="c1">//     &quot;click .turn&quot;: &quot;displayModal&quot;</span>
<span class="c1">//   },</span>
<span class="c1">//  </span>
<span class="c1">//   displayModal: function displayModal () { /* … */ },</span>
<span class="c1">//   select: function select () { /* … */ },</span>
<span class="c1">//   store: function store () { /* … */ },</span>
<span class="c1">//   turn: function turn () { /* … */ }</span>
<span class="c1">// }</span>
</code></pre></div><h2 id="toc_13">In conclusion</h2><p>Favor <strong>objects composition</strong>over <strong>inheritance</strong>. Don&#39;t use inheritance if it doesn&#39;t really make sense, or is required. Beware overlong inheritance chains: that&#39;s damn fragile.</p><p>What is preferable to avoir:</p><div class="highlight"><pre><code class="javascript"><span class="c1">// markets.model.js</span>
<span class="kd">var</span> <span class="nx">MarketsModel</span> <span class="o">=</span> <span class="nx">ConstructablesModel</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span> <span class="p">);</span>

<span class="c1">// main.js</span>
<span class="kd">var</span> <span class="nx">marketsModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MarketsModel</span><span class="p">();</span>
</code></pre></div><p>Far more flexible, simpler:</p><div class="highlight"><pre><code class="javascript"><span class="c1">// markets.model.js</span>
<span class="kd">var</span> <span class="nx">marketsModelProto</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span>
  <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">},</span> <span class="c1">// -&gt; specific interface of markets</span>
  <span class="nx">objectsModelProto</span><span class="p">,</span>
  <span class="nx">buildingsModelProto</span><span class="p">,</span>  
  <span class="nx">constructablesModelProto</span>
<span class="p">);</span>

<span class="c1">// main.js</span>
<span class="kd">var</span> <span class="nx">MarketsModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">marketsModelProto</span> <span class="p">);</span>
<span class="kd">var</span> <span class="nx">marketsModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MarketsModel</span><span class="p">();</span>
</code></pre></div><p>Or, if you need inheritance, use the prototypal one:</p><div class="highlight"><pre><code class="javascript"><span class="c1">// decorations.model.js</span>
<span class="kd">var</span> <span class="nx">decosModelProto</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span>
  <span class="nx">_</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span> <span class="nx">propsModelProto</span> <span class="p">),</span> <span class="c1">// -&gt; inherits from props</span>
  <span class="nx">constructablesModelProto</span><span class="p">,</span>
  <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">}</span> <span class="c1">// -&gt; override our mixins</span>
<span class="p">);</span>

<span class="c1">// main.js</span>
<span class="kd">var</span> <span class="nx">DecorationsModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">decosModelProto</span> <span class="p">);</span>
<span class="kd">var</span> <span class="nx">decorationsModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DecorationsModel</span><span class="p">();</span>
</code></pre></div><p>Let&#39;s end up this post with few post I recommend you to read if you need to know more about composition and inheritance with JavaScript:</p><ul><li><a href="http://www.datchley.name/understanding-prototypes-delegation-composition/">Understanding Prototypes, Delegation &amp; Composition</a> &gt; an explanation from A to Z which is simple, clear and illustrated</li><li><a href="https://medium.com/javascript-scene/common-misconceptions-about-inheritance-in-javascript-d5d9bab29b0a">Common Misconceptions about Inheritance in Javascript</a> &gt; detailed FAQ that goes deep on this subject</li></ul><div id="disqus_thread" role="complementary"></div></article></div><div class="grid__item three-tenths portable-one-whole"role="complementary"><!-- Lang navigation --><nav role="navigation"><ul class="nav nav--stacked text--center"><li class="current" ><a href="/">English version</a></li><li ><a href="/fr/">Version française</a></li></ul></nav><!-- About --><aside class="text--justify"><p>My name is <span class='brand-face'>Nicolas</span> and I'm a french Unit Production Manager at <a href='http://www.metidia.com'>Metidia</a>.</p><p>I <a href='/archive'>write</a> posts about web development and project management. I got <a href='http://www.linkedin.com/profile/view?id=143126897'>LinkedIn</a>, I <a href='https://github.com/nicoespeon/'>code</a> and I <a href='http://twitter.com/nicoespeon'>tweet</a> too.</p></aside><!-- RSS --><aside><p class="text--center"><a href="http://nicoespeon.com/feed.xml"><i class="icon-connection"></i>&nbsp;Stay tuned</a></p></aside><!-- Tweets --><aside class="text--center visuallyhidden--portable"><a class="twitter-timeline" href="https://twitter.com/nicoespeon" data-widget-id="320422386929377280">Tweets de @nicoespeon</a></aside><aside class="visuallyhidden--portable push--top"><h2 class="text--center">Friends</h2><a href="http://iceranking.com">IceRanking.com</a> - (SEO) Cédric Brun, Consultant en Référencement Durable</aside></div></div></div><!-- /container --></div><!-- /main-content --><footer role="contentinfo"><div class="container"><p>&copy; 2015 - <a href="https://twitter.com/nicoespeon">Nicolas (Espeon) Carlo</a><br>The website is built upon <a href='https://github.com/mojombo/jekyll'>Jekyll</a> and <a href='http://inuitcss.com/'>inuit.css</a> from the excellent <a href='https://twitter.com/csswizardry'>@csswizardry</a>. Source code is <a href='https://github.com/nicoespeon/nicoespeon.github.io'>hosted on GitHub</a>.</p></div></footer><!-- jQuery --><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script>$( function () {/*** This JS code is still small so its better to keep it inline.** Only apply if we are beyond the desk CSS breakpoint on load*/if ( $( window ).width() >= 1024 ) {var $timeline = $( "ul#timeline" );/*** Then hide every label description of the timeline*/$timeline.find( "a.timeline__label" ).each( function () {$( this ).find( "p" ).hide();} );/*** And delegate the visibility effect on hover for each label description*/$timeline.on( "mouseenter mouseleave", "a.timeline__label", function () {$( this ).find( "p" ).stop().toggle( "slow" );} );}} );</script><!-- Twitter API --><script>!function ( d, s, id ) {var js, fjs = d.getElementsByTagName( s )[0];if ( !d.getElementById( id ) ) {js = d.createElement( s );js.id = id;js.src = "//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore( js, fjs );}}( document, "script", "twitter-wjs" );</script><!-- Google Analytics --><script>var _gaq = _gaq || [];_gaq.push( ['_setAccount', 'UA-39957541-2'] );_gaq.push( ['_setDomainName', 'nicoespeon.com'] );_gaq.push( ['_trackPageview'] );(function () {var ga = document.createElement( 'script' );ga.type = 'text/javascript';ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName( 'script' )[0];s.parentNode.insertBefore( ga, s );})();</script><!-- Disqus --><script>var disqus_shortname = 'nicoespeon';var disqus_url = 'http://nicoespeon.com/en/2015/06/objects-composition-backbone/';var title = "Inheritance, composition and Backbone.js";(function () {var dsq = document.createElement( 'script' );dsq.type = 'text/javascript';dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName( 'head' )[0] || document.getElementsByTagName( 'body' )[0]).appendChild( dsq );})();</script><noscript>Please enable JavaScript to view the <ahref="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></body></html>